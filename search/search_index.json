{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>Material for MkDocs is used to document the important details of the CloudLabs project, including API and other technical specifications. For full documentation visit mkdocs.org.</p>"},{"location":"#setup","title":"Setup","text":""},{"location":"#python","title":"Python","text":"<ol> <li>Install build dependencies, which are required to install Python via <code>pyenv</code> <pre><code>sudo apt update; sudo apt install build-essential libssl-dev zlib1g-dev \\\nlibbz2-dev libreadline-dev libsqlite3-dev curl \\\nlibncursesw5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev\n</code></pre></li> <li>Install the latest version of Python, in which the Python version manager, pyenv may be used: <pre><code># Install the latest version of Python 3.11\npyenv install 3.11\n</code></pre></li> <li>Configure and set the appropriate Python version <pre><code># List installed version\npyenv versions\n\n# Set a Python version system-wide\npyenv 3.11.3\n</code></pre></li> </ol>"},{"location":"#project","title":"Project","text":"<ol> <li>Git clone the repository and initialize a Python virtual environment within the directory: <pre><code># Clone the repository via SSH\ngit clone git@github.com:projectcatena/cloudlabs-mkdocs.git\n\n# Init a Python virtual environment\npython -m venv env\n\n# Activate the Python venv\nsource env/bin/activate\n</code></pre></li> <li>Install the <code>mkdocs-material</code> python package: <pre><code>pip install mkdocs-material\n</code></pre></li> <li>The project may be deployed locally by running the following commands: <pre><code># Start the live-reloading docs server\nmkdocs serve\n</code></pre></li> </ol>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"app/","title":"Getting started","text":"<p>The front-end component of CloudLabs is built using Next.js, and TailwindCSS. Prebuilt components from Preline was also used in the project.  </p> <p>GitHub repository: cloudlabs/app</p>"},{"location":"app/#setup","title":"Setup","text":"<p>The project may be deployed locally using npm: <pre><code># Install dependencies\nnpm install\n\n# Run development server\nnpm run dev\n</code></pre></p> <p>Alternatively, docker/podman may be used: <pre><code># Build image\ndocker build -t cloudlabs/app .\n\n# Run as container\ndocker run -p 3000:3000 cloudlabs/app\n</code></pre></p> <p>After which, head on to <code>http://localhost:3000</code> to see the live website.</p>"},{"location":"app/Contributing/","title":"How to Contribute","text":"<ol> <li>Clone the repository.  <pre><code>git clone -b staging git@link_of_repo\n</code></pre></li> <li>Create and switch to a new branch     <pre><code>git switch -c your-new-branch-name\n</code></pre></li> <li>Commit changes after development     <pre><code>git commit -m \"Describe your changes\"\n</code></pre></li> <li>Push to remote repository     <pre><code>git push -u origin your-branch-name\n</code></pre></li> <li>Open a Pull Request on GitHub</li> </ol>"},{"location":"server/","title":"Getting started","text":"<p>The back-end component of CloudLabs is built using Spring Boot 2.7.11, which is used to interface with the guacd service, and Google Cloud Platform API.  </p> <p>GitHub repository: cloudlabs/server</p>"},{"location":"server/#setup","title":"Setup","text":"<p>The project may be deployed locally using docker/podman: <pre><code># Build the docker image (include --progress=plain --no-cache to observe stdout)\ndocker build  -t cloudlabs/server .\n\n# Run the image on default port (or add --server.port=9000 for custom port)\ndocker run -p 8080:8080 cloudlabs/server </code></pre></p>"},{"location":"server/contribute/","title":"How to Contribute","text":"<ol> <li>Clone the repository.  <pre><code>git clone -b staging git@link_of_repo\n</code></pre></li> <li>Create and switch to a new branch     <pre><code>git switch -c your-new-branch-name\n</code></pre></li> <li>Commit changes after development     <pre><code>git commit -m \"Describe your changes\"\n</code></pre></li> <li>Push to remote repository     <pre><code>git push -u origin your-branch-name\n</code></pre></li> <li>Open a Pull Request on GitHub</li> </ol>"},{"location":"server/general/auth/","title":"Authentication","text":"<p>The CloudLabs server requires a JWT token for authentication. The token is provided when a user logins, or registers for an account, whereby the token  is provided as part of the response.</p> <p>The JWT token is provided in the form of a HttpOnly cookie, and it will be automatically set by the browser for future requests with the \"Set-Cookie\"  header. </p> <p>Do note that, the token must not be stored in local storage, as this defeats the purpose of a HttpOnly cookie.</p>"},{"location":"server/general/auth/#architecture","title":"Architecture","text":"CloudLabs Authentication Architecture (Source) <p>The CloudLabs server authentication is based on the architecture as shown in the image above. A filter is utilized to obtain the JWT token that is stored as a cookie in the request header. which is then passed on to continue the authentication process.</p>"},{"location":"server/general/auth/#api-reference","title":"API Reference","text":"<p>This section documents the API specifications for the CloudLabs server endpoints.</p>"},{"location":"server/general/auth/#login","title":"Login","text":"<pre><code>POST: /api/auth/login\n</code></pre> <p>Parameters:</p> Name Type Description Required <code>email</code> string A user's email. Yes <code>password</code> string A user's password. Yes Request <pre><code>{\n\"email\": \"test2@gmail.com\",\n\"password\": \"test123\"\n}\n</code></pre> Response <pre><code>{\n\"jwt\": \"eyJhbGciOiJSUzI1NiJ9.eyJyb2xlcyI6W3siaWQiOjIsIm5hbWUiOiJVU0VSIn0seyJpZCI6MywibmFtZSI6IlRVVE9SIn1dLCJmdWxsbmFtZSI6InRlc3QiLCJ1c2VybmFtZSI6InRlc3QyIiwic3ViIjoidGVzdDJAZ21haWwuY29tIiwiaWF0IjoxNjg5MzI4NDY2LCJleHAiOjE2ODkzMjg3NjZ9.gignjXSicupP0g8Fu1cK9cTwiXfPFv-XjuPOXL_fnlZgnABKzTEy4QqtF4FNeJHRA-eNWs-Nh-cANpxsB2LFUmIEA51nslwthu6bL_0D7otB5bXAnuncI6QnsVoSDN0p20jmSWr6cKkHitoimkZAQHjPDBrcFom86qSkHkddAxvCZDPAkBY4VWmG1KNHPczvCScUQ1HjxYHknEHO5TiagWSMYmyLuPhFBbCOrADu0AZQKfgYG8WX8LqT_ACeQ4kMNM-k9O8kiEHbiLVmCu_cDVGxDWzqmT00KZuHsqUi4YyVqbtxUZsa8aEkO6u4M36too0hFSqpaZCGAHcr41oxBQ\"\n}\n</code></pre>"},{"location":"server/general/auth/#register","title":"Register","text":"<pre><code>POST: /api/auth/register\n</code></pre> <p>Parameters:</p> Name Type Description Required <code>fullname</code> string A user's fullname. Yes <code>username</code> string A user's username. Yes <code>email</code> string A user's email. Yes <code>password</code> string A user's password. Yes Request <pre><code>{\n\"fullname\": \"test\",\n\"username\": \"test2\",\n\"email\": \"test2@gmail.com\",\n\"password\": \"test123\"\n}\n</code></pre> Response <pre><code>{\n\"jwt\": \"eyJhbGciOiJSUzI1NiJ9.eyJyb2xlcyI6W3siaWQiOjIsIm5hbWUiOiJVU0VSIn0seyJpZCI6MywibmFtZSI6IlRVVE9SIn1dLCJmdWxsbmFtZSI6InRlc3QiLCJ1c2VybmFtZSI6InRlc3QyIiwic3ViIjoidGVzdDJAZ21haWwuY29tIiwiaWF0IjoxNjg5MzI4NDY2LCJleHAiOjE2ODkzMjg3NjZ9.gignjXSicupP0g8Fu1cK9cTwiXfPFv-XjuPOXL_fnlZgnABKzTEy4QqtF4FNeJHRA-eNWs-Nh-cANpxsB2LFUmIEA51nslwthu6bL_0D7otB5bXAnuncI6QnsVoSDN0p20jmSWr6cKkHitoimkZAQHjPDBrcFom86qSkHkddAxvCZDPAkBY4VWmG1KNHPczvCScUQ1HjxYHknEHO5TiagWSMYmyLuPhFBbCOrADu0AZQKfgYG8WX8LqT_ACeQ4kMNM-k9O8kiEHbiLVmCu_cDVGxDWzqmT00KZuHsqUi4YyVqbtxUZsa8aEkO6u4M36too0hFSqpaZCGAHcr41oxBQ\"\n}\n</code></pre>"},{"location":"server/google%20cloud%20platform/","title":"Overview","text":"<p>CloudLabs utilizes the GCP Java Client Library to interface with GCP's API and execute operations.</p> <p>To get started with development using the GCP's API, visit the official GCP guide.</p>"},{"location":"server/google%20cloud%20platform/#authentication","title":"Authentication","text":"<p>Authentication for development purposes is fairly straightforward, as one only needs to setup the Application Default Credentials (ADC) locally through the execution of a few simply commands using the <code>gcloud</code> command line utility.</p> <ol> <li>Install and initialize the gcloud CLI <pre><code>gcloud init\n</code></pre></li> <li>Create your credential file <pre><code>gcloud auth application-default login\n</code></pre></li> </ol> <p>Revoke authentication when not needed: <pre><code>gcloud auth application-default revoke\n</code></pre></p> <p>After which, the CloudLabs server will be able to authenticate and communicate with GCP's API, if the client library is used. However, a Bearer authentication token will be required for manual requests, including the use of the <code>curl</code> utility.</p>"},{"location":"server/google%20cloud%20platform/compute/","title":"Compute Engine","text":"<p>The CloudLabs server utilizes the Java Compute Engine API v1 to programmatically create and manage compute instances.</p>"},{"location":"server/google%20cloud%20platform/compute/#documentation","title":"Documentation","text":"<p>However, the aforementioned link is merely an API reference, a more detailed guide in managing compute instances can be found at the GCP Compute Engine Guide. </p> <p>Though, it is important to note that, the guide may exclude code examples for certain operations, such as reserving and assigning external IP addresses to compute instances. In this case, one may refer to both the aforementioned Java Compute Engine API v1 or the General Compute Engine API v1 for reference.</p>"},{"location":"server/google%20cloud%20platform/compute/#api-reference","title":"API Reference","text":"<p>This section documents the API specifications for the CloudLabs server endpoints.</p>"},{"location":"server/google%20cloud%20platform/compute/#create","title":"Create","text":"<pre><code>POST: /api/compute/create\n</code></pre> <p>Parameters:</p> Name Type Description Required <code>instanceName</code> string Name for the compute instance. Yes <code>sourceImage</code> Image Contains the name and project URL for a machine image. Yes <code>machineType</code> InstanceType Contains the name of an instance type (e.g. e2-micro). Yes <code>startupScript</code> string Content of shell script to be executed on startup. No <code>address</code> Subnet Subnet for the compute instance (only name is needed). Yes <code>maxRunDuration</code> Long Max runtime duration for instance in seconds (120 or more) No Request <pre><code>{\n\"instanceName\": \"test18\",\n\"sourceImage\": {\n\"name\": \"debian-11\",\n\"project\": \"debian-cloud\"\n},\n\"machineType\": {\n\"name\": \"e2-micro\"\n},\n\"startupScript\": \"\",\n\"address\": {\n\"subnetName\": \"test-subnet-a\"\n},\n\"maxRunDuration\": 120\n}\n</code></pre> Response <pre><code>{\n\"instanceName\": \"test18\",\n\"address\": {\n\"name\": \"test18-public-ip\",\n\"ipv4Address\": \"35.240.158.214\"\n},\n\"maxRunDuration\": 120\n}\n</code></pre>"},{"location":"server/google%20cloud%20platform/compute/#delete","title":"Delete","text":"<pre><code>POST: /api/compute/delete\n</code></pre> <p>Parameters:</p> Name Type Description Required <code>instanceName</code> string Name for the compute instance. Yes Request <pre><code>{\n\"instanceName\": \"test18\",\n}\n</code></pre> Response <pre><code>{\n\"instanceName\": \"test18\",\n\"status\": \"DONE\"\n}\n</code></pre>"},{"location":"server/google%20cloud%20platform/storage/","title":"Cloud Storage","text":"<p>The CloudLabs server utilizes GCP Cloud Storage to store the virtual disks uploaded by users. Furthermore, Cloud Build is also used to build and transform the virtual disks to images that can be used as part of a compute instance's boot disk.</p> <p>For more information, refer to this documentation.</p>"},{"location":"server/google%20cloud%20platform/storage/#upload-flow","title":"Upload Flow","text":"<p>Due to the sheer size of typical virtual disks, a reliable method to upload files is required. This is achieved through allowing users to upload their virtual disks directly to a Cloud Storage bucket using a dynamically generated Signed URL.</p>"},{"location":"server/google%20cloud%20platform/storage/#api-reference","title":"API Reference","text":"<p>This section documents the API specifications for the CloudLabs server endpoints.</p>"},{"location":"server/google%20cloud%20platform/storage/#get-signed-url","title":"Get Signed URL","text":"<pre><code>POST: /api/storage/signed\n</code></pre> <p>Parameters:</p> Name Type Description Required <code>objectName</code> string File name of the virtual disk of type vmdk or vhd. Yes Request <pre><code>{\n\"objectName\": \"Windows_Server_2019-disk1.vmdk\",\n}\n</code></pre> Response <pre><code>{\n\"objectName\": \"Windows_Server_2019-disk1.vmdk\",\n\"signedURL\": \"https://storage.googleapis.com/bucket_name/Windows_Server_2019-disk1.vmdk_and_more\",\n}\n</code></pre>"},{"location":"server/google%20cloud%20platform/storage/#start-a-build","title":"Start a Build","text":"<pre><code>POST: /api/storage/start\n</code></pre> <p>Parameters:</p> Name Type Description Required <code>objectName</code> string File name of the virtual disk of type vmdk or vhd. Yes <code>imageName</code> string Image name that conforms to GCP's specifictions. Yes Request <pre><code>{\n\"objectName\": \"Windows_Server_2019-disk1.vmdk\",\n\"imageName\": \"windows-server-2019\",\n}\n</code></pre> Response <pre><code>{\n\"objectName\": \"Windows_Server_2019-disk1.vmdk\",\n\"imageName\": \"windows-server-2019\",\n\"buildStatus\": \"QUEUED\",\n\"buildId\": \"5d86bae4-263d-4ba8-a643-f90ad0fffa65\"\n}\n</code></pre>"},{"location":"server/guacamole/tunnel/","title":"Tunnel","text":"<p>Apache Guacamole is a clientless remote desktop gateway, which has been integrated to the CloudLabs server to interface with a guacd instance.</p>"},{"location":"server/guacamole/tunnel/#overview","title":"Overview","text":"<p>The main purpose of the server is to facilitate the creation of a tunnel between the client and a virtual machine instance on the cloud through the guacd service.</p>"},{"location":"server/guacamole/tunnel/#api-reference","title":"API Reference","text":"<p>The API endpoints listed in this section should only be initiated using the <code>guacamole-common-js</code> npm package, which will automatically handle the communication between the front-end and back-end server in relation to the guacd service.</p> <p>Example of initating a HTTP tunnel using the <code>guacamole-common-js</code> package: <pre><code>var guac = new Guacamole.Client(\n// True to enable CORS\nnew Guacamole.HTTPTunnel('http://localhost:8080/tunnel', true, params)\n);\n</code></pre></p>"},{"location":"server/guacamole/tunnel/#create","title":"Create","text":"<pre><code>POST: /tunnel?connect\n</code></pre> <p>Parameters:</p> Name Type Description Required <code>hostname</code> string Hostname for the VM such as, \"10.10.1.1\". Yes <code>ignorecert</code> boolean For RDP certification. Yes (for RDP) <code>name</code> string User-specified name of the connection. Yes <code>password</code> string Password for the remote connection. Yes <code>port</code> integer A custom port number for the protocol. No <code>protocol</code> string Remote access protocol such as \"rdp\". Yes Response <pre><code>{\nd69456c0-c7c7-4360-bebd-b122e26c3b7d\n}\n</code></pre>"},{"location":"server/guacamole/tunnel/#read","title":"Read","text":"<pre><code>GET: /tunnel?read:{session-id}:{id}\n</code></pre> <p>Parameters:</p> Name Type Description Required <code>session-id</code> string Unique session id created by Guacamole. Yes <code>id</code> integer Supposed id for each request to the VM. Yes <p>An important header, <code>Guacamole-Tunnel-Token</code> wil be set as well: <pre><code>{\n\"Guacamole-Tunnel-Token\": \"IwCOVgo/6nevmcwbf/UePX9BFalcs0hL+a9euqY+LPN+\"\n}\n</code></pre></p> Response <pre><code>{\n4.size,1.0,4.1024,3.768;4.size,2.-1,2.11,2.16;3.img,1.3,2.12,2.-1,9.image/png,1.0,1.0;4.blob,1.3,232.iVBORw0KGgoAAAANSUhEUgAAAAsAAAAQCAYAAADAvYV+AAAABmJLR0QA/wD/AP+gvaeTAAAAYklEQVQokY2RQQ4AIQgDW+L/v9y9qCEsIJ4QZggoJAnDYwAwFQwASI4EO8FEMH95CRYTnfCDOyGFK6GEM6GFo7AqKI4sSSsCJH1X+roFkKdjueABX/On77lz2uGtr6pj9okfTeJQAYVaxnMAAAAASUVORK5CYII=;3.end,1.3;6.cursor,1.0,1.0,2.-1,1.0,1.0,2.11,2.16;4.sync,8.15035699;0.;\n}\n</code></pre>"},{"location":"server/guacamole/tunnel/#write","title":"Write","text":"<pre><code>POST: /tunnel?write:{session-id}\n</code></pre> <p>Parameters:</p> Name Type Description Required <code>hostname</code> string Hostname for the VM such as, \"10.10.1.1\". Yes <code>ignorecert</code> boolean For RDP certification. Yes (for RDP) <code>name</code> string User-specified name of the connection. Yes <code>password</code> string Password for the remote connection. Yes <code>port</code> integer A custom port number for the protocol. No <code>protocol</code> string Remote access protocol such as \"rdp\". Yes Response <pre><code>Null\n</code></pre>"}]}